// ================================
// 1. Disease Database
// ================================
const diseases = {
  fever: {
    keywords: {
      en:['fever','temperature'],
      hi:['bukhar','taap'],
      mr:['tap','taap'],
      te:['jwar'],
      ta:['kÄyccal'],
      bn:['jwar'],
      kn:['jwara'],
      gu:['tav','bukhar']
    },
    info: {
      en: "Fever is a temporary increase in your body temperature, often due to infection.",
      hi: "à¤¬à¥à¤–à¤¾à¤° à¤†à¤ªà¤•à¥‡ à¤¶à¤°à¥€à¤° à¤•à¥‡ à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ à¤®à¥‡à¤‚ à¤…à¤¸à¥à¤¥à¤¾à¤¯à¥€ à¤µà¥ƒà¤¦à¥à¤§à¤¿ à¤¹à¥ˆ, à¤…à¤•à¥à¤¸à¤° à¤¸à¤‚à¤•à¥à¤°à¤®à¤£ à¤•à¥‡ à¤•à¤¾à¤°à¤£à¥¤",
      mr: "à¤¤à¤¾à¤ª à¤¹à¤¾ à¤¸à¤‚à¤•à¥à¤°à¤®à¤£à¤¾à¤®à¥à¤³à¥‡ à¤¶à¤°à¥€à¤°à¤¾à¤šà¤¾ à¤¤à¤¾à¤¤à¥à¤ªà¥à¤°à¤¤à¤¾ à¤¤à¤¾à¤ª à¤µà¤¾à¤¢ à¤†à¤¹à¥‡.",
      te: "à°œà±à°µà°°à°®à± à°…à°¨à±‡à°¦à°¿ à°¶à°°à±€à°° à°‰à°·à±à°£à±‹à°—à±à°°à°¤ à°¤à°¾à°¤à±à°•à°¾à°²à°¿à°• à°ªà±†à°°à±à°—à±à°¦à°², à°Žà°•à±à°•à±à°µà°—à°¾ à°‡à°¨à±à°«à±†à°•à±à°·à°¨à± à°•à°¾à°°à°£à°‚à°—à°¾.",
      ta: "à®•à®¾à®¯à¯à®šà¯à®šà®²à¯ à®Žà®©à¯à®ªà®¤à¯ à®‰à®Ÿà®²à®¿à®©à¯ à®µà¯†à®ªà¯à®ªà®¨à®¿à®²à¯ˆà®¯à®¿à®©à¯ à®¤à®±à¯à®•à®¾à®²à®¿à®• à®‰à®¯à®°à¯à®µà®¾à®•à¯à®®à¯, à®ªà¯†à®°à¯à®®à¯à®ªà®¾à®²à¯à®®à¯ à®¤à¯Šà®±à¯à®±à¯ à®•à®¾à®°à®£à®®à®¾à®•.",
      bn: "à¦œà§à¦¬à¦° à¦¹à¦² à¦¶à¦°à§€à¦°à§‡à¦° à¦¤à¦¾à¦ªà¦®à¦¾à¦¤à§à¦°à¦¾à¦° à¦¸à¦¾à¦®à¦¯à¦¼à¦¿à¦• à¦¬à§ƒà¦¦à§à¦§à¦¿, à¦¸à¦¾à¦§à¦¾à¦°à¦£à¦¤ à¦¸à¦‚à¦•à§à¦°à¦®à¦£à§‡à¦° à¦•à¦¾à¦°à¦£à§‡à¥¤",
      kn: "à²œà³à²µà²°à²µà³ à²¸à²¾à²®à²¾à²¨à³à²¯à²µà²¾à²—à²¿ à²¸à³‹à²‚à²•à²¿à²¨à²¿à²‚à²¦ à²¸à²‚à²­à²µà²¿à²¸à³à²µ à²¶à²°à³€à²°à²¦ à²¤à²¾à²¤à³à²•à²¾à²²à²¿à²• à²¤à²¾à²ªà²®à²¾à²¨ à²à²°à²¿à²•à³†à²¯à²¾à²—à³à²µà³à²¦à³.",
      gu: "àª¤àª¾àªµ àª¶àª°à«€àª°àª¨àª¾ àª¤àª¾àªªàª®àª¾àª¨àª®àª¾àª‚ àª…àª¸à«àª¥àª¾àª¯à«€ àªµàª§àª¾àª°à«‹ àª›à«‡, àª¸àª¾àª®àª¾àª¨à«àª¯ àª°à«€àª¤à«‡ àª¸àª‚àª•à«àª°àª®àª£àª¨àª¾ àª•àª¾àª°àª£à«‡."
    },
    advice: {
      en: "Drink plenty of fluids, rest well, monitor temperature. See a doctor if fever persists for more than 3 days or is very high.",
      hi: "à¤•à¤¾à¤«à¥€ à¤ªà¤¾à¤¨à¥€ à¤ªà¤¿à¤à¤‚, à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚à¥¤ à¤…à¤—à¤° à¤¬à¥à¤–à¤¾à¤° 3 à¤¦à¤¿à¤¨à¥‹à¤‚ à¤¸à¥‡ à¤…à¤§à¤¿à¤• à¤¯à¤¾ à¤¬à¤¹à¥à¤¤ à¤…à¤§à¤¿à¤• à¤¹à¥ˆ, à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤¸à¥‡ à¤®à¤¿à¤²à¥‡à¤‚à¥¤",
      mr: "à¤ªà¤¾à¤£à¥€ à¤ªà¥à¤¯à¤¾, à¤†à¤°à¤¾à¤® à¤•à¤°à¤¾. 3 à¤¦à¤¿à¤µà¤¸à¤¾à¤‚à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤œà¤¾à¤¸à¥à¤¤ à¤¤à¤¾à¤ª à¤…à¤¸à¤²à¥à¤¯à¤¾à¤¸ à¤•à¤¿à¤‚à¤µà¤¾ à¤œà¤¾à¤¸à¥à¤¤ à¤…à¤¸à¥‡à¤² à¤¤à¤° à¤¡à¥‰à¤•à¥à¤Ÿà¤°à¤•à¤¡à¥‡ à¤œà¤¾.",
      te: "à°¤à°°à±à°µà°¾à°¤à°¿ à°°à±‹à°œà±à°²à°²à±‹ à°Žà°•à±à°•à±à°µ à°œà±à°µà°°à°‚ à°²à±‡à°¦à°¾ à°¤à±€à°µà±à°°à°‚à°—à°¾ à°‰à°‚à°Ÿà±‡ à°µà±ˆà°¦à±à°¯à±à°¨à°¿ à°¸à°‚à°ªà±à°°à°¦à°¿à°‚à°šà°‚à°¡à°¿. à°®à°‚à°šà°¿à°—à°¾ à°µà°¿à°¶à±à°°à°¾à°‚à°¤à°¿ à°¤à±€à°¸à±à°•à±‹à°‚à°¡à°¿, à°¦à±à°°à°µà°¾à°²à± à°¤à±à°°à°¾à°—à°‚à°¡à°¿.",
      ta: "à®¨à®©à¯à®•à¯ à®“à®¯à¯à®µà¯ à®Žà®Ÿà¯à®¤à¯à®¤à¯, à®ªà¯‹à®¤à¯à®®à®¾à®© à®¨à¯€à®°à¯ à®•à¯à®Ÿà®¿à®•à¯à®•à®µà¯à®®à¯. 3 à®¨à®¾à®Ÿà¯à®•à®³à¯à®•à¯à®•à¯ à®®à¯‡à®²à¯ à®•à®¾à®¯à¯à®šà¯à®šà®²à¯ à®¨à¯€à®Ÿà®¿à®¤à¯à®¤à®¾à®²à¯ à®®à®°à¯à®¤à¯à®¤à¯à®µà®°à¯ˆ à®šà®¨à¯à®¤à®¿à®•à¯à®•à®µà¯à®®à¯.",
      bn: "à¦ªà§à¦°à¦šà§à¦° à¦ªà¦¾à¦¨à¦¿ à¦ªà¦¾à¦¨ à¦•à¦°à§à¦¨, à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¿à¦¨à¥¤ à§© à¦¦à¦¿à¦¨à§‡à¦° à¦¬à§‡à¦¶à¦¿ à¦œà§à¦¬à¦° à¦¥à¦¾à¦•à¦²à§‡ à¦¡à¦¾à¦•à§à¦¤à¦¾à¦°à§‡à¦° à¦•à¦¾à¦›à§‡ à¦¯à¦¾à¦¨à¥¤",
      kn: "à²¨à³€à²°à³ à²•à³à²¡à²¿à²¯à²¿à²°à²¿, à²µà²¿à²¶à³à²°à²¾à²‚à²¤à²¿ à²ªà²¡à³†à²¯à²¿à²°à²¿. 3 à²¦à²¿à²¨à²•à³à²•à²¿à²‚à²¤ à²¹à³†à²šà³à²šà³ à²œà³à²µà²° à²‡à²¦à³à²¦à²°à³† à²µà³ˆà²¦à³à²¯à²°à²¨à³à²¨à³ à²­à³‡à²Ÿà²¿ à²®à²¾à²¡à²¿.",
      gu: "àª˜àª£à«àª‚ àªªàª¾àª£à«€ àªªà«€àªµà«‹, àª†àª°àª¾àª® àª•àª°à«‹. 3 àª¦àª¿àªµàª¸àª¥à«€ àªµàª§àª¾àª°à«‡ àª¤àª¾àªµ àª°àª¹à«‡àª¶à«‡ àª…àª¥àªµàª¾ àªµàª§à« àªŠàª‚àªšà«‹ àª¹à«‹àª¯ àª¤à«‹ àª¡à«‹àª•à«àªŸàª° àªªàª¾àª¸à«‡ àªœàª¾àª“."
    }
  },

  stomach: {
    keywords: {
      en:['stomach','stomach pain','vomit','nausea'],
      hi:['pet dard','pet dukha','ulti','matli'],
      mr:['pota dukh','pota dukhatay','ulti'],
      te:['kudupu vedana'],
      ta:['vayitru vali'],
      bn:['pet byatha','pete betha','ulti'],
      kn:['hottu dard'],
      gu:['pet dard','ulti']
    },
    info: {
      en: "Stomach ache can be caused by indigestion, infections, or food-related issues.",
      hi: "à¤ªà¥‡à¤Ÿ à¤¦à¤°à¥à¤¦ à¤…à¤ªà¤š, à¤¸à¤‚à¤•à¥à¤°à¤®à¤£ à¤¯à¤¾ à¤­à¥‹à¤œà¤¨ à¤¸à¤‚à¤¬à¤‚à¤§à¥€ à¤•à¤¾à¤°à¤£à¥‹à¤‚ à¤¸à¥‡ à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤",
      mr: "à¤ªà¥‹à¤Ÿà¤¦à¥à¤–à¥€ à¤…à¤ªà¤šà¤¨, à¤¸à¤‚à¤¸à¤°à¥à¤— à¤•à¤¿à¤‚à¤µà¤¾ à¤…à¤¨à¥à¤¨à¤¾à¤®à¥à¤³à¥‡ à¤¹à¥‹à¤Š à¤¶à¤•à¤¤à¥‹.",
      te: "à°•à°¡à±à°ªà± à°¨à±Šà°ªà±à°ªà°¿ à°œà±€à°°à±à°£ à°¸à°®à°¸à±à°¯à°²à± à°²à±‡à°¦à°¾ à°‡à°¨à±à°«à±†à°•à±à°·à°¨à± à°µà°²à±à°² à°•à°²à°¿à°—à°µà°šà±à°šà±.",
      ta: "à®µà®¯à®¿à®±à¯à®±à¯à®µà®²à®¿ à®šà¯†à®°à®¿à®®à®¾à®© à®ªà®¿à®°à®šà¯à®šà®¿à®©à¯ˆà®•à®³à¯ à®…à®²à¯à®²à®¤à¯ à®¤à¯Šà®±à¯à®±à¯ à®•à®¾à®°à®£à®®à®¾à®• à®‡à®°à¯à®•à¯à®•à®²à®¾à®®à¯.",
      bn: "à¦ªà§‡à¦Ÿà¦¬à§à¦¯à¦¥à¦¾ à¦¹à¦œà¦® à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¬à¦¾ à¦¸à¦‚à¦•à§à¦°à¦®à¦£à§‡à¦° à¦•à¦¾à¦°à¦£à§‡ à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¥¤",
      kn: "à²¹à³Šà²Ÿà³à²Ÿà³† à²¨à³‹à²µà³ à²œà³€à²°à³à²£ à²¸à²®à²¸à³à²¯à³† à²…à²¥à²µà²¾ à²¸à³‹à²‚à²•à²¿à²¨à²¿à²‚à²¦ à²¸à²‚à²­à²µà²¿à²¸à²¬à²¹à³à²¦à³.",
      gu: "àªªà«‡àªŸàª®àª¾àª‚ àª¦à«àª–àª¾àªµà«‹ àª¹àªœàª®àª¨à«€ àª¸àª®àª¸à«àª¯àª¾ àª…àª¥àªµàª¾ àª¸àª‚àª•à«àª°àª®àª£àª¥à«€ àª¥àªˆ àª¶àª•à«‡ àª›à«‡."
    },
    advice: {
      en: "Avoid heavy food, drink fluids, rest. See a doctor if pain is severe or persistent.",
      hi: "à¤­à¤¾à¤°à¥€ à¤–à¤¾à¤¨à¤¾ à¤¨ à¤–à¤¾à¤à¤‚, à¤ªà¤¾à¤¨à¥€ à¤ªà¤¿à¤à¤‚, à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚à¥¤ à¤…à¤—à¤° à¤¦à¤°à¥à¤¦ à¤œà¥à¤¯à¤¾à¤¦à¤¾ à¤¯à¤¾ à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤¹à¥ˆ à¤¤à¥‹ à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤¸à¥‡ à¤®à¤¿à¤²à¥‡à¤‚à¥¤",
      mr: "à¤œà¤¡ à¤…à¤¨à¥à¤¨ à¤Ÿà¤¾à¤³à¤¾, à¤ªà¤¾à¤£à¥€ à¤ªà¥à¤¯à¤¾, à¤µà¤¿à¤¶à¥à¤°à¤¾à¤‚à¤¤à¥€ à¤˜à¥à¤¯à¤¾. à¤œà¤¾à¤¸à¥à¤¤ à¤µà¥‡à¤¦à¤¨à¤¾ à¤…à¤¸à¤²à¥à¤¯à¤¾à¤¸ à¤¡à¥‰à¤•à¥à¤Ÿà¤°à¤•à¤¡à¥‡ à¤œà¤¾.",
      te: "à°­à°¾à°°à±€ à°†à°¹à°¾à°°à°‚ à°¤à°¿à°¨à°•à°‚à°¡à°¿, à°¦à±à°°à°µà°¾à°²à± à°¤à±à°°à°¾à°—à°‚à°¡à°¿, à°µà°¿à°¶à±à°°à°¾à°‚à°¤à°¿ à°¤à±€à°¸à±à°•à±‹à°‚à°¡à°¿. à°¤à±€à°µà±à°°à°®à±ˆà°¨ à°¨à±Šà°ªà±à°ªà°¿ à°…à°¯à°¿à°¤à±‡ à°µà±ˆà°¦à±à°¯à±à°¨à°¿à°¨à°¿ à°¸à°‚à°ªà±à°°à°¦à°¿à°‚à°šà°‚à°¡à°¿.",
      ta: "à®Žà®Ÿà¯à®•à¯à®•à¯à®®à¯ à®‰à®£à®µà¯ à®¤à®µà®¿à®°à¯à®•à¯à®•à®µà¯à®®à¯, à®¨à¯€à®°à¯ à®•à¯à®Ÿà®¿à®•à¯à®•à®µà¯à®®à¯, à®“à®¯à¯à®µà¯ à®Žà®Ÿà¯à®•à¯à®•à®µà¯à®®à¯. à®µà®²à®¿ à®¤à¯€à®µà®¿à®°à®®à®¾à®• à®‡à®°à¯à®¨à¯à®¤à®¾à®²à¯ à®®à®°à¯à®¤à¯à®¤à¯à®µà®°à¯ˆ à®…à®£à¯à®•à®µà¯à®®à¯.",
      bn: "à¦­à¦¾à¦°à¦¿ à¦–à¦¾à¦¬à¦¾à¦° à¦à¦¡à¦¼à¦¾à¦¨, à¦ªà¦¾à¦¨à¦¿ à¦ªà¦¾à¦¨ à¦•à¦°à§à¦¨, à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¿à¦¨à¥¤ à¦¤à§€à¦¬à§à¦° à¦¬à¦¾ à¦¦à§€à¦°à§à¦˜à¦¸à§à¦¥à¦¾à¦¯à¦¼à§€ à¦¬à§à¦¯à¦¥à¦¾ à¦¥à¦¾à¦•à¦²à§‡ à¦¡à¦¾à¦•à§à¦¤à¦¾à¦° à¦¦à§‡à¦–à§à¦¨à¥¤",
      kn: "à²­à²¾à²°à²¿ à²†à²¹à²¾à²°à²¦à²¿à²‚à²¦ à²¤à²ªà³à²ªà²¿à²¸à²¿, à²¨à³€à²°à³ à²•à³à²¡à²¿à²¯à²¿à²°à²¿, à²µà²¿à²¶à³à²°à²¾à²‚à²¤à²¿. à²¤à³€à²µà³à²° à²¨à³‹à²µà³ à²‡à²¦à³à²¦à²°à³† à²µà³ˆà²¦à³à²¯à²°à²¨à³à²¨à³ à²­à³‡à²Ÿà²¿ à²®à²¾à²¡à²¿.",
      gu: "àª­àª¾àª°à«‡ àª–à«‹àª°àª¾àª• àªŸàª¾àª³à«‹, àªªàª¾àª£à«€ àªªà«€àª“, àª†àª°àª¾àª® àª•àª°à«‹. àª¦à«àª–àª¾àªµà«‹ àª–à«‚àª¬ àª¤à«€àªµà«àª° àª¹à«‹àª¯ àª¤à«‹ àª¡à«‹àª•à«àªŸàª° àªªàª¾àª¸à«‡ àªœàª¾àª“."
    }
  }
};

// ================================
// 2. Chatbox Helper
// ================================
const chatbox = document.getElementById('chatbox');

function addMessage(text, sender){
  const msg = document.createElement('div');
  msg.className = sender==='bot' ? 'bg-blue-100 text-blue-900 self-start p-2 rounded-lg' : 'bg-blue-500 text-white self-end p-2 rounded-lg';
  msg.textContent = text;
  chatbox.appendChild(msg);
  chatbox.scrollTop = chatbox.scrollHeight;
}

// ================================
// 3. Disease Detection
// ================================
function detectDisease(text, lang){
  text = text.toLowerCase();
  for(let disease in diseases){
    const keywords = [...(diseases[disease].keywords.en||[]), ...(diseases[disease].keywords[lang]||[])];
    if(keywords.some(word=>text.includes(word))) return disease;
  }
  return null;
}

// ================================
// 4. Send Message
// ================================
function sendMsg(){
  const input = document.getElementById('userInput');
  const text = input.value.trim();
  const lang = document.getElementById('language').value;
  if(!text) return;

  addMessage(text, 'user');
  input.value='';

  setTimeout(()=>{
    const disease = detectDisease(text, lang);
    if(disease){
      const info = diseases[disease].info[lang];
      const advice = diseases[disease].advice[lang];
      addMessage(`ðŸ”¹ Info: ${info}\nðŸ”¹ Advice: ${advice}`, 'bot');
    } else {
      addMessage("Sorry, I couldn't detect the symptom. Please describe more clearly.", 'bot');
    }
  }, 500);
}

// ================================
// 5. Initialize Chatbot
// ================================
addMessage("Hi! Describe your symptoms in your language.", 'bot');

// ================================
// 6. Contact Form Handler (Optional)
// ================================
const contactForm = document.getElementById('contactForm');
if(contactForm){
  contactForm.addEventListener('submit', function(e){
    e.preventDefault();
    const email = document.getElementById('userEmail').value;
    const message = document.getElementById('userMessage').value;
    if(email && message){
      alert('Thank you! Your message has been sent.');
      this.reset();
    }
  });
}
